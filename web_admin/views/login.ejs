<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ƒêƒÉng nh·∫≠p | Qu·∫£n l√Ω m√≥n ƒÉn</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f172a;
      --card: #ffffff;
      --accent: #f97316; /* cam */
      --accent2: #10b981; /* xanh l√° */
      --text: #0f172a;
      --muted: #64748b;
      --shadow: 0 20px 60px rgba(0,0,0,0.25);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100vh;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: radial-gradient(600px at 20% 20%, rgba(249,115,22,0.12), transparent 45%),
                  radial-gradient(500px at 80% 10%, rgba(16,185,129,0.12), transparent 40%),
                  #0f172a;
      display: grid; place-items: center; padding: 24px;
      color: var(--text);
    }
    .shell {
      width: min(960px, 95vw);
      display: grid; grid-template-columns: 1.05fr 0.95fr;
      background: var(--card); border-radius: 20px; overflow: hidden;
      box-shadow: var(--shadow);
    }
    @media (max-width: 900px) { .shell { grid-template-columns: 1fr; } }

    .visual {
      background: linear-gradient(135deg, rgba(249,115,22,0.9), rgba(16,185,129,0.9));
      color: #fff; padding: 32px; display: flex; flex-direction: column; gap: 18px; justify-content: center;
    }
    .badge { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background: rgba(255,255,255,0.15); font-weight:700; }
    .headline { font-size: 28px; font-weight: 700; margin: 0; line-height: 1.2; }
    .chips { display:flex; flex-wrap:wrap; gap:8px; }
    .chip { background: rgba(255,255,255,0.15); padding:8px 12px; border-radius:12px; font-size:13px; }

    .form {
      padding: 40px 32px; display: flex; flex-direction: column; gap: 16px; justify-content: center;
    }
    h1 { margin: 0; font-size: 24px; font-weight: 700; }
    .muted { color: var(--muted); font-size: 14px; margin: 0; }
    label { font-weight: 600; font-size: 14px; display: block; margin-bottom: 6px; }
    input {
      width: 100%; padding: 12px 14px; border-radius: 12px;
      border: 1px solid #e2e8f0; background: #f8fafc; font-size: 14px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(249,115,22,0.2); }
    .actions { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
    .btn {
      border: none; border-radius: 12px; padding: 12px 16px; font-weight: 700; font-size: 14px;
      cursor: pointer; transition: transform 0.15s, box-shadow 0.2s;
      display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-primary { background: linear-gradient(135deg, var(--accent), #fb8c00); color: #fff; box-shadow: 0 10px 30px rgba(249,115,22,0.35); }
    .btn-ghost { background: transparent; color: var(--muted); }
    .btn:hover { transform: translateY(-1px); }
    .helper { font-size: 13px; color: var(--muted); margin-top: -4px; }
    .error { margin-top: 8px; color: #ef4444; font-weight: 600; }
  </style>
</head>
<body>
  <div class="shell">
    <div class="visual">
      <span class="badge">üçú Food Admin</span>
      <div class="headline">Qu·∫£n l√Ω m√≥n ƒÉn & v√πng mi·ªÅn d·ªÖ d√†ng</div>
      <p class="muted" style="color:rgba(255,255,255,0.85);">
        C·∫≠p nh·∫≠t ƒë·∫∑c s·∫£n, h√¨nh ·∫£nh, gi√° c·∫£ v√† best time cho th·ª±c kh√°ch.
      </p>
      <div class="chips">
        <span class="chip">ƒê·∫∑c s·∫£n</span>
        <span class="chip">M√≥n m·ªõi</span>
        <span class="chip">H√¨nh ƒë·∫πp</span>
      </div>
    </div>

    <div class="form">
      <div>
        <h1>ƒêƒÉng nh·∫≠p</h1>
        <p class="muted">Ch√†o m·ª´ng quay l·∫°i trang qu·∫£n tr·ªã Food Travel.</p>
      </div>
      <form id="login-form">
        <div>
          <label for="email">Email</label>
          <input id="email" type="email" name="email" placeholder="ban@congty.com" required>
        </div>
        <div>
          <label for="password">M·∫≠t kh·∫©u</label>
          <input id="password" type="password" name="password" placeholder="********" required>
          <div class="helper">Qu√™n m·∫≠t kh·∫©u? Li√™n h·ªá admin.</div>
        </div>
        <div class="actions">

          <button type="submit" class="btn btn-primary">ƒêƒÉng nh·∫≠p</button>
        </div>
        <div class="muted">Ch∆∞a c√≥ t√†i kho·∫£n? <a href="/register" style="color:var(--accent); font-weight:700; text-decoration:none;">ƒêƒÉng k√Ω</a></div>
      </form>
      <div id="error" class="error"></div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js';
    import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js';

    const firebaseConfig = {
      apiKey: 'AIzaSyBpfEezr2jddRgUs9_5_vMtg1jHeynqAVs',
      authDomain: 'foodg-travel.firebaseapp.com',
      projectId: 'foodg-travel',
      storageBucket: 'foodg-travel.appspot.com',
      messagingSenderId: '272763763632',
      appId: '1:272763763632:web:8338bc7ce331035b7af475'
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const form = document.getElementById('login-form');
    const errorBox = document.getElementById('error');

    function showError(msg) { errorBox.textContent = msg || ''; }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      showError('');
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      try {
        const cred = await signInWithEmailAndPassword(auth, email, password);
        const tokenResult = await cred.user.getIdTokenResult(true);
        const role = tokenResult.claims.role || (tokenResult.claims.admin ? 'admin' : null);
        if (role !== 'admin') throw new Error('T√†i kho·∫£n kh√¥ng c√≥ quy·ªÅn admin.');
        document.cookie = `idToken=${tokenResult.token}; Path=/; Max-Age=3600; SameSite=Lax`;
        window.location.href = '/';
      } catch (err) {
        console.error(err);
        showError(err.message || 'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i');
      }
    });
  </script>
</body>
</html>
